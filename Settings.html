<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SocialSentiment | Settings</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <!-- Sidebar Navigation -->
    <aside class="sidebar" id="sidebar">
        <div class="logo-container">
            <div class="logo">SS</div>
            <div class="logo-text">SocialSentiment</div>
        </div>
        
        <nav class="nav-menu">
            <div class="nav-item">
                <a href="index.html" class="nav-link">
                    <i class="fas fa-home nav-icon"></i>
                    <span class="nav-text">Dashboard</span>
                    <span class="nav-tooltip">Dashboard</span>
                </a>
            </div>
            <div class="nav-item">
                <a href="analytics.html" class="nav-link">
                    <i class="fas fa-chart-pie nav-icon"></i>
                    <span class="nav-text">Analytics</span>
                    <span class="nav-tooltip">Analytics</span>
                </a>
            </div>
            <div class="nav-item">
                <a href="sentiment.html" class="nav-link">
                    <i class="fas fa-smile nav-icon"></i>
                    <span class="nav-text">Sentiment</span>
                    <span class="nav-tooltip">Sentiment</span>
                </a>
            </div>
            <div class="nav-item">
                <a href="alerts.html" class="nav-link">
                    <i class="fas fa-bell nav-icon"></i>
                    <span class="nav-text">Alerts</span>
                    <span class="nav-tooltip">Alerts</span>
                </a>
            </div>
            <div class="nav-item">
                <a href="settings.html" class="nav-link active">
                    <i class="fas fa-cog nav-icon"></i>
                    <span class="nav-text">Settings</span>
                    <span class="nav-tooltip">Settings</span>
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link" id="logout-btn">
                    <i class="fas fa-sign-out-alt nav-icon"></i>
                    <span class="nav-text">Logout</span>
                    <span class="nav-tooltip">Logout</span>
                </a>
            </div>
        </nav>
    </aside>

    <!-- Main Content Area -->
    <main class="main-content">
        <header class="header">
            <div class="search-bar">
                <i class="fas fa-search search-icon"></i>
                <input type="text" placeholder="Search settings...">
            </div>
            
            <div class="user-menu">
                <div class="header-action notification-bell">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge">3</span>
                </div>
                <div class="header-action">
                    <i class="fas fa-envelope"></i>
                </div>
                <div class="header-action">
                    <i class="fas fa-calendar-alt"></i>
                </div>
                <div class="user-profile">
                    <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="User" class="user-avatar">
                    <div>
                        <div class="user-name">Sarah Johnson</div>
                        <div class="user-role">Admin</div>
                    </div>
                </div>
            </div>
        </header>

        <h1 class="page-title">
            <i class="fas fa-cog"></i>
            Settings
        </h1>
        <p class="page-subtitle">Manage your account and application preferences</p>
        
        <!-- Account Settings -->
        <div class="card">
            <h2 class="card-title">
                <i class="fas fa-user-cog"></i>
                Account Settings
            </h2>
            
            <div class="settings-form">
                <div class="form-group">
                    <label>Profile Photo</label>
                    <div style="display: flex; align-items: center; gap: 1rem;">

                        <img src="https://randomuser.me/api/portraits/lego/1.jpg" alt="User" class="user-avatar" style="width: 80px; height: 80px;">
                        <div>
                            <button class="btn btn-secondary">Change Photo</button>
                            <button class="btn btn-secondary" style="margin-left: 0.5rem;">Remove</button>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" class="form-control" value="">
                </div>
                
                <div class="form-group">
                    <label>Email Address</label>
                    <input type="email" class="form-control" value="">
                </div>
                
                <div class="form-group">
                    <label>Phone Number</label>
                    <input type="tel" class="form-control" value="">
                </div>
                
                <div class="form-group">
                    <label>Timezone</label>
                    <select class="form-control form-select">
                        <option selected disabled value="">Select Timezone</option>
                        <option>(UTC-12:00) International Date Line West</option>
                        <option>(UTC-11:00) Midway Island, Samoa</option>
                        <option>(UTC-10:00) Hawaii</option>
                        <option>(UTC-09:00) Alaska</option>
                        <option>(UTC-08:00) Pacific Time (US & Canada)</option>
                        <option>(UTC-07:00) Mountain Time (US & Canada)</option>
                        <option>(UTC-06:00) Central Time (US & Canada)</option>
                        <option>(UTC-05:00) Eastern Time (US & Canada)</option>
                        <option>(UTC-04:00) Atlantic Time (Canada)</option>
                        <option>(UTC-03:00) Buenos Aires, Georgetown</option>
                        <option>(UTC-02:00) Mid-Atlantic</option>
                        <option>(UTC-01:00) Azores, Cape Verde Is.</option>
                        <option>(UTC) Greenwich Mean Time, London</option>
                        <option>(UTC+01:00) Amsterdam, Berlin, Rome</option>
                        <option>(UTC+02:00) Athens, Istanbul, Jerusalem</option>
                        <option>(UTC+03:00) Baghdad, Kuwait, Riyadh</option>
                        <option>(UTC+04:00) Abu Dhabi, Muscat</option>
                        <option>(UTC+05:00) Islamabad, Karachi</option>
                        <option>(UTC+06:00) Astana, Dhaka</option>
                        <option>(UTC+07:00) Bangkok, Hanoi, Jakarta</option>
                        <option>(UTC+08:00) Beijing, Hong Kong, Singapore</option>
                        <option>(UTC+09:00) Osaka, Sapporo, Tokyo</option>
                        <option>(UTC+10:00) Brisbane, Melbourne, Sydney</option>
                        <option>(UTC+11:00) Magadan, Solomon Is.</option>
                        <option>(UTC+12:00) Auckland, Wellington</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Language</label>
                    <select class="form-control form-select">
                        <option selected disabled value="">Select Language</option>
                        <option>English</option>
                        <option>Spanish</option>
                        <option>French</option>
                        <option>German</option>
                        <option>Chinese</option>
                        <option>Japanese</option>
                    </select>
                </div>
            </div>
            
            <div style="display: flex; justify-content: flex-end; gap: 1rem; margin-top: 1.5rem;">
                <button class="btn btn-secondary">Cancel</button>
                <button class="btn btn-primary">Save Changes</button>
            </div>
        </div>
        
        <!-- Security Settings -->
        <div class="card">
            <h2 class="card-title">
                <i class="fas fa-shield-alt"></i>
                Security Settings
            </h2>
            
            <div class="settings-form">
                <div class="form-group">
                    <label>Change Password</label>
                    <input type="password" class="form-control" placeholder="Current Password">
                    <input type="password" class="form-control" style="margin-top: 0.5rem;" placeholder="New Password">
                    <input type="password" class="form-control" style="margin-top: 0.5rem;" placeholder="Confirm New Password">
                </div>
                
                <div class="form-group">
                    <label>Two-Factor Authentication</label>
                    <div class="checkbox-group">
                        <input type="checkbox" id="2fa-enabled">
                        <label for="2fa-enabled">Enable Two-Factor Authentication</label>
                    </div>
                    <p style="font-size: 0.85rem; color: var(--gray); margin-top: 0.5rem;">
                        Adds an extra layer of security to your account
                    </p>
                </div>
                
                <div class="form-group">
                    <label>Active Sessions</label>
                    <div style="border: 1px solid var(--gray-light); border-radius: 8px; padding: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem 0; border-bottom: 1px solid var(--gray-light);">
                            <div>
                                <div style="font-weight: 500;">Chrome on Windows</div>
                                <div style="font-size: 0.85rem; color: var(--gray);">Chicago, IL • Active now</div>
                            </div>
                            <button class="btn btn-secondary" style="padding: 0.25rem 0.75rem; font-size: 0.85rem;">Logout</button>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem 0;">
                            <div>
                                <div style="font-weight: 500;">Safari on Mac</div>
                                <div style="font-size: 0.85rem; color: var(--gray);">New York, NY • 2 hours ago</div>
                            </div>
                            <button class="btn btn-secondary" style="padding: 0.25rem 0.75rem; font-size: 0.85rem;">Logout</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div style="display: flex; justify-content: flex-end; gap: 1rem; margin-top: 1.5rem;">
                <button class="btn btn-secondary">Cancel</button>
                <button class="btn btn-primary">Save Changes</button>
            </div>
        </div>
        
        <!-- Notification Settings -->
        <div class="card">
            <h2 class="card-title">
                <i class="fas fa-bell"></i>
                Notification Settings
            </h2>
            
            <div class="settings-form">
                <div class="form-group">
                    <label>Email Notifications</label>
                    <div class="checkbox-group">
                        <input type="checkbox" id="email-mentions" checked>
                        <label for="email-mentions">New mentions</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="email-sentiment" checked>
                        <label for="email-sentiment">Sentiment changes</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="email-reports">
                        <label for="email-reports">Weekly reports</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="email-updates">
                        <label for="email-updates">Product updates</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Push Notifications</label>
                    <div class="checkbox-group">
                        <input type="checkbox" id="push-mentions" checked>
                        <label for="push-mentions">New mentions</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="push-critical" checked>
                        <label for="push-critical">Critical alerts</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="push-influencers">
                        <label for="push-influencers">Influencer mentions</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>SMS Notifications</label>
                    <div class="checkbox-group">
                        <input type="checkbox" id="sms-critical">
                        <label for="sms-critical">Critical alerts only</label>
                    </div>
                    <p style="font-size: 0.85rem; color: var(--gray); margin-top: 0.5rem;">
                        Standard messaging rates may apply
                    </p>
                </div>
            </div>
            
            <div style="display: flex; justify-content: flex-end; gap: 1rem; margin-top: 1.5rem;">
                <button class="btn btn-secondary">Cancel</button>
                <button class="btn btn-primary">Save Changes</button>
            </div>
        </div>
        
        <!-- Integration Settings -->
        <div class="card">
            <h2 class="card-title">
                <i class="fas fa-plug"></i>
                Integrations
            </h2>
            
            <div class="settings-form">
                <div class="form-group">
                    <label>Social Media Platforms</label>
                    <div class="checkbox-group">
                        <input type="checkbox" id="integrate-facebook" checked>
                        <label for="integrate-facebook">Facebook</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="integrate-twitter" checked>
                        <label for="integrate-twitter">Twitter</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="integrate-instagram" checked>
                        <label for="integrate-instagram">Instagram</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="integrate-youtube">
                        <label for="integrate-youtube">YouTube</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="integrate-linkedin">
                        <label for="integrate-linkedin">LinkedIn</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Third-Party Tools</label>
                    <div class="checkbox-group">
                        <input type="checkbox" id="integrate-slack">
                        <label for="integrate-slack">Slack</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="integrate-google-analytics">
                        <label for="integrate-google-analytics">Google Analytics</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="integrate-zapier">
                        <label for="integrate-zapier">Zapier</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>API Key</label>
                    <div style="display: flex; gap: 0.5rem;">
                        <input type="text" class="form-control" value="sk_test_51Hx8..." readonly>
                        <button class="btn btn-secondary">Copy</button>
                        <button class="btn btn-secondary">Regenerate</button>
                    </div>
                    <p style="font-size: 0.85rem; color: var(--gray); margin-top: 0.5rem;">
                        Keep this key secure. Do not share it publicly.
                    </p>
                </div>
            </div>
            
            <div style="display: flex; justify-content: flex-end; gap: 1rem; margin-top: 1.5rem;">
                <button class="btn btn-secondary">Cancel</button>
                <button class="btn btn-primary">Save Changes</button>
            </div>
        </div>
        
        <!-- Danger Zone -->
        <div class="card" style="border-left: 4px solid var(--danger);">
            <h2 class="card-title" style="color: var(--danger);">
                <i class="fas fa-exclamation-triangle"></i>
                Danger Zone
            </h2>
            
            <div class="settings-form">
                <div class="form-group">
                    <label>Export Data</label>
                    <p style="margin-bottom: 0.5rem;">Download all your data in JSON or CSV format</p>
                    <div style="display: flex; gap: 0.5rem;">
                        <button class="btn btn-secondary">Export as JSON</button>
                        <button class="btn btn-secondary">Export as CSV</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Delete Account</label>
                    <p style="margin-bottom: 0.5rem;">Permanently delete your account and all associated data</p>
                    <button class="btn btn-secondary" style="background-color: var(--danger-light); color: var(--danger);">
                        Delete Account
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/script.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        let user = null;
        if (localStorage.getItem('socialSentimentAuthToken')) {
            user = JSON.parse(localStorage.getItem('socialSentimentAuthToken'));
        }
        // Elements
        const headerAvatar = document.querySelector('.user-profile .user-avatar');
        const headerName = document.querySelector('.user-profile .user-name');
        const headerRole = document.querySelector('.user-profile .user-role');
        const profileAvatar = document.querySelector('.settings-form .user-avatar');
        const nameInput = document.querySelector('input[type="text"]');
        const emailInput = document.querySelector('input[type="email"]');
        const phoneInput = document.querySelector('input[type="tel"]');
        const timezoneSelect = document.querySelector('select.form-select');
        const languageSelect = document.querySelectorAll('select.form-select')[1];
        // Notification, Integration, Security fields
        const notificationFields = [
            'email-mentions', 'email-sentiment', 'email-reports', 'email-updates',
            'push-mentions', 'push-critical', 'push-influencers', 'sms-critical'
        ];
        const integrationFields = [
            'integrate-facebook', 'integrate-twitter', 'integrate-instagram', 'integrate-youtube', 'integrate-linkedin',
            'integrate-slack', 'integrate-google-analytics', 'integrate-zapier'
        ];
        const twofa = document.getElementById('2fa-enabled');

        // Load user data into all sections
        if (user) {
            // Header
            if (headerAvatar) headerAvatar.src = user.avatarUrl || 'https://randomuser.me/api/portraits/lego/1.jpg';
            if (headerName) headerName.textContent = user.name || user.username || user.email || '';
            if (headerRole) headerRole.textContent = user.email || '';
            // Profile section
            if (profileAvatar) profileAvatar.src = user.avatarUrl || 'https://randomuser.me/api/portraits/lego/1.jpg';
            if (nameInput) nameInput.value = user.name || user.username || '';
            if (emailInput) emailInput.value = user.email || '';
            if (phoneInput) phoneInput.value = user.phone || '';
            if (timezoneSelect && user.timezone) {
                Array.from(timezoneSelect.options).forEach(opt => {
                    opt.selected = (opt.text === user.timezone);
                });
            }
            if (languageSelect && user.language) {
                Array.from(languageSelect.options).forEach(opt => {
                    opt.selected = (opt.text === user.language);
                });
            }
            // Notifications
            notificationFields.forEach(id => {
                const el = document.getElementById(id);
                if (el && user.notifications && id in user.notifications) {
                    el.checked = !!user.notifications[id];
                }
            });
            // Integrations
            integrationFields.forEach(id => {
                const el = document.getElementById(id);
                if (el && user.integrations && id in user.integrations) {
                    el.checked = !!user.integrations[id];
                }
            });
            // Security
            if (twofa && user.security && 'twofa' in user.security) {
                twofa.checked = !!user.security.twofa;
            }
        } else {
            if (headerAvatar) headerAvatar.src = 'https://randomuser.me/api/portraits/lego/1.jpg';
            if (headerName) headerName.textContent = '';
            if (headerRole) headerRole.textContent = '';
            if (profileAvatar) profileAvatar.src = 'https://randomuser.me/api/portraits/lego/1.jpg';
            if (nameInput) nameInput.value = '';
            if (emailInput) emailInput.value = '';
            if (phoneInput) phoneInput.value = '';
            if (timezoneSelect) timezoneSelect.selectedIndex = 0;
            if (languageSelect) languageSelect.selectedIndex = 0;
            notificationFields.forEach(id => {
                const el = document.getElementById(id);
                if (el) el.checked = false;
            });
            integrationFields.forEach(id => {
                const el = document.getElementById(id);
                if (el) el.checked = false;
            });
            if (twofa) twofa.checked = false;
        }

        // Profile photo upload
        const changePhotoBtn = document.querySelector('.settings-form .btn.btn-secondary');
        if (changePhotoBtn) {
            // Insert a hidden file input if not present
            let fileInput = document.getElementById('profile-photo-input');
            if (!fileInput) {
                fileInput = document.createElement('input');
                fileInput.type = 'file';
                fileInput.accept = 'image/*';
                fileInput.id = 'profile-photo-input';
                fileInput.style.display = 'none';
                changePhotoBtn.parentNode.appendChild(fileInput);
            }
            changePhotoBtn.addEventListener('click', function(e) {
                e.preventDefault();
                fileInput.click();
            });
            fileInput.addEventListener('change', function(e) {
                const file = fileInput.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(evt) {
                        if (profileAvatar) profileAvatar.src = evt.target.result;
                        if (headerAvatar) headerAvatar.src = evt.target.result;
                        if (!user) user = {};
                        user.avatarUrl = evt.target.result;
                        localStorage.setItem('socialSentimentAuthToken', JSON.stringify(user));
                    };
                    reader.readAsDataURL(file);
                }
            });
        }

        // Save changes button
        const saveBtn = document.querySelector('.btn.btn-primary');
        if (saveBtn) {
            saveBtn.addEventListener('click', function(e) {
                e.preventDefault();
                if (!user) user = {};
                // Profile
                user.name = nameInput ? nameInput.value : '';
                user.email = emailInput ? emailInput.value : '';
                user.phone = phoneInput ? phoneInput.value : '';
                user.timezone = timezoneSelect ? timezoneSelect.options[timezoneSelect.selectedIndex].text : '';
                user.language = languageSelect ? languageSelect.options[languageSelect.selectedIndex].text : '';
                // Notifications
                user.notifications = user.notifications || {};
                notificationFields.forEach(id => {
                    const el = document.getElementById(id);
                    if (el) user.notifications[id] = el.checked;
                });
                // Integrations
                user.integrations = user.integrations || {};
                integrationFields.forEach(id => {
                    const el = document.getElementById(id);
                    if (el) user.integrations[id] = el.checked;
                });
                // Security
                user.security = user.security || {};
                if (twofa) user.security.twofa = twofa.checked;
                // Save to localStorage
                localStorage.setItem('socialSentimentAuthToken', JSON.stringify(user));
                // Update header/profile immediately
                if (headerName) headerName.textContent = user.name || user.username || user.email || '';
                if (headerRole) headerRole.textContent = user.email || '';
                if (profileAvatar) profileAvatar.src = user.avatarUrl || 'https://randomuser.me/api/portraits/lego/1.jpg';
                if (headerAvatar) headerAvatar.src = user.avatarUrl || 'https://randomuser.me/api/portraits/lego/1.jpg';
                alert('Profile and settings updated successfully!');
            });
        }

        // Logout button
        const logoutBtn = document.getElementById('logout-btn');
        if (logoutBtn) {
            logoutBtn.addEventListener('click', function(e) {
                e.preventDefault();
                localStorage.removeItem('socialSentimentAuthToken');
                window.location.href = 'login.html';
            });
        }
    });
    </script>
</body>
</html>